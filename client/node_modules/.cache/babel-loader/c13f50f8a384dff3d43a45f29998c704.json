{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\v-thobr\\\\projects\\\\littlerock\\\\LittleRockChurchApp\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\v-thobr\\\\projects\\\\littlerock\\\\LittleRockChurchApp\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import axios from\"axios\";import{setAlert}from\"./alert\";import{GET_IMAGES,IMAGE_ERROR,CLEAR_IMAGE}from\"./types\";// Upload a Image\nexport var uploadEventImage=function uploadEventImage(FormData){return(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var config,image,res,errors;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;config={headers:{\"Content-Type\":\"application/json\"}};image={url:FormData};console.log(image);_context.next=6;return axios.post(\"/api/events/images\",image,config);case 6:res=_context.sent;dispatch({type:GET_IMAGES,payload:res.data});dispatch(setAlert(\"Image uploaded\",\"success\"));_context.next=16;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);errors=_context.t0.response.data.errors;if(errors){errors.forEach(function(error){return dispatch(setAlert(error.msg,\"error\"));});}dispatch({type:IMAGE_ERROR,payload:{msg:_context.t0.response,status:_context.t0.response.status}});case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function(_x){return _ref.apply(this,arguments);};}());};// Get users daycares\nexport var getImages=function getImages(){return(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(\"/api/events/images\");case 3:res=_context2.sent;dispatch({type:GET_IMAGES,payload:res.data});_context2.next=11;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);dispatch({type:CLEAR_IMAGE});dispatch({type:IMAGE_ERROR,payload:{msg:_context2.t0.response.statusText,status:_context2.t0.response.status}});case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function(_x2){return _ref2.apply(this,arguments);};}());};// Delete image\nexport var deleteImage=function deleteImage(id){return(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var errors;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!window.confirm(\"Are you sure you want to delete your image?\")){_context3.next=14;break;}_context3.prev=1;console.log(\"deleting image at position: \".concat(id));_context3.next=5;return axios.delete(\"/api/events/images/\".concat(id));case 5:dispatch({type:CLEAR_IMAGE});dispatch(setAlert(\"Your image has been deleted\"));_context3.next=14;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](1);errors=_context3.t0.response.data.errors;if(errors){errors.forEach(function(error){return dispatch(setAlert(error.msg,\"error\"));});}dispatch({type:IMAGE_ERROR,payload:{msg:_context3.t0.response,status:_context3.t0.response.status}});case 14:case\"end\":return _context3.stop();}}},_callee3,null,[[1,9]]);}));return function(_x3){return _ref3.apply(this,arguments);};}());};","map":{"version":3,"sources":["C:/Users/v-thobr/projects/littlerock/LittleRockChurchApp/client/src/actions/images.js"],"names":["axios","setAlert","GET_IMAGES","IMAGE_ERROR","CLEAR_IMAGE","uploadEventImage","FormData","dispatch","config","headers","image","url","console","log","post","res","type","payload","data","errors","response","forEach","error","msg","status","getImages","get","statusText","deleteImage","id","window","confirm","delete"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport { setAlert } from \"./alert\";\r\nimport { GET_IMAGES, IMAGE_ERROR, CLEAR_IMAGE } from \"./types\";\r\n\r\n// Upload a Image\r\nexport const uploadEventImage = (FormData) => async (dispatch) => {\r\n  try {\r\n    const config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      }\r\n    };\r\n\r\n    const image = {\r\n      url: FormData\r\n    };\r\n\r\n    console.log(image);\r\n\r\n    const res = await axios.post(\"/api/events/images\", image, config);\r\n    dispatch({\r\n      type: GET_IMAGES,\r\n      payload: res.data\r\n    });\r\n\r\n    dispatch(setAlert(\"Image uploaded\", \"success\"));\r\n  } catch (err) {\r\n    const errors = err.response.data.errors;\r\n\r\n    if (errors) {\r\n      errors.forEach((error) => dispatch(setAlert(error.msg, \"error\")));\r\n    }\r\n\r\n    dispatch({\r\n      type: IMAGE_ERROR,\r\n      payload: { msg: err.response, status: err.response.status }\r\n    });\r\n  }\r\n};\r\n\r\n// Get users daycares\r\nexport const getImages = () => async (dispatch) => {\r\n  try {\r\n    const res = await axios.get(\"/api/events/images\");\r\n\r\n    dispatch({\r\n      type: GET_IMAGES,\r\n      payload: res.data\r\n    });\r\n  } catch (err) {\r\n    dispatch({ type: CLEAR_IMAGE });\r\n\r\n    dispatch({\r\n      type: IMAGE_ERROR,\r\n      payload: { msg: err.response.statusText, status: err.response.status }\r\n    });\r\n  }\r\n};\r\n\r\n// Delete image\r\nexport const deleteImage = (id) => async (dispatch) => {\r\n  if (window.confirm(\"Are you sure you want to delete your image?\")) {\r\n    try {\r\n      console.log(`deleting image at position: ${id}`);\r\n\r\n      await axios.delete(`/api/events/images/${id}`);\r\n\r\n      dispatch({ type: CLEAR_IMAGE });\r\n\r\n      dispatch(setAlert(\"Your image has been deleted\"));\r\n    } catch (err) {\r\n      const errors = err.response.data.errors;\r\n\r\n      if (errors) {\r\n        errors.forEach((error) => dispatch(setAlert(error.msg, \"error\")));\r\n      }\r\n      dispatch({\r\n        type: IMAGE_ERROR,\r\n        payload: {\r\n          msg: err.response,\r\n          status: err.response.status\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}